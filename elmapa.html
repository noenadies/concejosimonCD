<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Simple Markers</title>
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #idbtatras{

        position: absolute;
        top: 3%;
        left: 90%;
        width: 50px;
        height: 25px;
        background-color: black;
        color: rgb(255, 255, 255);
        font-size: 13px;
        z-index: 3;
      }
    </style>

<script src="https://www.gstatic.com/firebasejs/5.8.3/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyABOpIJyC5XDTAlqwVauPAZET6uUmeMbiQ",
    authDomain: "concejosimoncd.firebaseapp.com",
    databaseURL: "https://concejosimoncd.firebaseio.com",
    projectId: "concejosimoncd",
    storageBucket: "concejosimoncd.appspot.com",
    messagingSenderId: "879095685896"
  };
  firebase.initializeApp(config);
</script>
  </head>
  <body> <button id="idbtatras" onclick="fidbtatras();">Atras</button>
    <div id="map"></div>
    <script>

var todomksdir={ant:0,des:0,ahora:0};

var todovotantest={ant:0,des:0,ahora:0};
var   arraytvotordenode=[];
var arraytodomarksdirordenode=[];
  /*firebase.database().ref("votantes").orderByChild("puesto").on("child_added", function(snapshot) {
  console.log(snapshot.val());
  });*/
var idxllamtodotodo=0;
var vllegueunsaves=0;
var arraysupremo=[];
/*
var varrayvotante={cedula:arraytodoordenode[i].cedula,departamento:arraytodoordenode[i].departamento,
    direccion:arraytodoordenode[i].direccion,
email:arraytodoordenode[i].email,
facebook:arraytodoordenode[i].facebook,
fecha:arraytodoordenode[i].fecha,
idreferido:arraytodoordenode[i].idreferido,
mesa:arraytodoordenode[i].mesa,
movil:arraytodoordenode[i].movil,
municipio:arraytodoordenode[i].municipio ,
notareferido:arraytodoordenode[i].notareferido,
nombres:arraytodoordenode[i].nombre ,
notauser:arraytodoordenode[i].notauser,
referido:arraytodoordenode[i].referido,
puesto:arraytodoordenode[i].puesto
 
  
  }*/
 var  arraydireccion=[];
var vsupremo={array:1,direccion:1,idx:0};

inictraemarksdirecci();

function inictraemarksdirecci(){
  traetodoormarkdiredenadopor("direccion");
traetodoorvotadenadopor("direccion");
floop();
}




function floop(){

  
setInterval(function(){ 

if(arraytodomarksdirordenode.length==todomksdir.des){
  setTimeout(function(){
    todomksdir.des=0;
    llenonodomarksdirec();
   // elforordenatodopornodo();
 //   creatd();
  },2000)
  }

  if(arraytvotordenode.length==todovotantest.des){
  setTimeout(function(){
    todovotantest.des=0;
    llenonodovotante();
   // elforordenatodopornodo();
 //   creatd();
  },2000)
  }








 }, 3000);

}





function traetodoormarkdiredenadopor(st1){
  firebase.database().ref("marksdirecci").orderByChild(String(st1)).on("child_added", function(snapshot) {
 // console.log(snapshot.val());
  //todovotantest=snapshot.val();
  arraytodomarksdirordenode.push(snapshot.val());
//  console.log("long  "+ todovotantest.des);
 // elforordenatodopornodo();
// creatd();
todomksdir.ant=todomksdir.ahora;
todomksdir.ahora=todomksdir.ahora+1;
todomksdir.des=todomksdir.ahora;

//console.log(snapshot.val().length);




  });


}



function traetodoorvotadenadopor(st1){
  firebase.database().ref("votantes").orderByChild(String(st1)).on("child_added", function(snapshot) {
 // console.log(snapshot.val());
  //todovotantest=snapshot.val();
  arraytvotordenode.push(snapshot.val());
//  console.log("long  "+ todovotantest.des);
 // elforordenatodopornodo();
// creatd();
todovotantest.ant=todovotantest.ahora;
todovotantest.ahora=todovotantest.ahora+1;
todovotantest.des=todovotantest.ahora;

console.log(snapshot.val().length);




  });


}




function llenonodomarksdirec(){
  /*
   console.log(arraytodomarksdirordenode.length);
  for(var i in arraytodomarksdirordenode){

    
    console.log(arraytodomarksdirordenode[i].direccion);


  }*/
   

}



function llenonodovotante(){
  /*
  console.log(arraytvotordenode.length);
 for(var ii in arraytvotordenode){

   
   console.log(arraytvotordenode[ii].direccion);


 }*/
 comparandodirecciones();

}


var ce=0;
function comparandodirecciones(){
  for(var i in arraytodomarksdirordenode){



for(var ii in arraytvotordenode){

   
console.log(arraytvotordenode[ii].direccion);


}



ce=ce+1;
    
console.log(arraytodomarksdirordenode[i].direccion);
console.log("----------");

}
console.log("valor de ce  "+ce);

  
}




function elforordenatodopornodo(){

for(var i in arraytodoordenode){
    

  arraypuestooder.push({cedula:arraytodoordenode[i].cedula,departamento:arraytodoordenode[i].departamento,
    direccion:arraytodoordenode[i].direccion,
email:arraytodoordenode[i].email,
facebook:arraytodoordenode[i].facebook,
fecha:arraytodoordenode[i].fecha,
idreferido:arraytodoordenode[i].idreferido,
mesa:arraytodoordenode[i].mesa,
movil:arraytodoordenode[i].movil,
municipio:arraytodoordenode[i].municipio ,
notareferido:arraytodoordenode[i].notareferido,
nombres:arraytodoordenode[i].nombre ,
notauser:arraytodoordenode[i].notauser,
referido:arraytodoordenode[i].referido,
puesto:arraytodoordenode[i].puesto
 
  
  });

    

  }
}





















    var arraymarks=[];
    function  fidbtatras(){
  window.location.href="index.html";

}//4.693763, -74.060678
      function initMap() {
        var myLatLng = {lat: 4.693763, lng: -74.060678};

        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 12,
          center: myLatLng
        });

        arraymarks.push({direecion:1,marker:new google.maps.Marker({
          position: myLatLng,
          map: map,
          title: 'Hello World!'
        })});
 

        arraymarks[arraymarks.length-1].marker.addListener('click', function(e) {
        //  map.setZoom(8);
         // map.setCenter(marker.getPosition());
         alert(this.title);
        });





      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCV4ya46Yoag-iGeJb5SUwZ2q1Irx0UjnU&callback=initMap">
     </script>
  </body>
</html>